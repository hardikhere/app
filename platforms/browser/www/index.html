<!DOCTYPE html>

<html>
    <head>
      <style>
       
      </style>
        <meta http-equiv="Content-Security-Policy" content="default-src * self blob: data: gap:; style-src * self 'unsafe-inline' blob: data: gap:; script-src * 'self' 'unsafe-eval' 'unsafe-inline' blob: data: gap:; object-src * 'self' blob:
         data: gap:; img-src * self 'unsafe-inline' blob: data: gap:; connect-src self * 'unsafe-inline' blob: data: gap:; frame-src * self blob: data: gap:;">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
       
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css"/>
        <title>Login</title>
        <style>
                    body{
                      margin: 0px;
                      padding: 0%;
            background: rgb(250,105,105);
background: linear-gradient(234deg, rgba(250,105,105,0.5578606442577031) 0%, rgba(255,189,19,0.5662640056022409) 97%);
             }
        </style>
    </head>
    <body>
        <div class="app">
          
            <div id="deviceready">
             
                <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
                <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
           
                <div class="event received">
                    <ion-grid>
                       
                       <ion-row>
                       

                            <div style="text-align: center;">
                              <img src="img/logofp.png" />
                            </div>
                            <ion-row>
                        

                           <div id="errorMsg" style="color: dodgerblue;text-align: center;">

                           </div>
                           <div style="text-align: center;margin-left: 50%;">
                            <ion-spinner id="spinner"  name="circles" color="primary" style="
                            display: none;"></ion-spinner>
                           </div>
                       
                        <div style="margin-top: 50px;">
                          <ion-row>
                            <ion-col>
                              <ion-item>
                                <ion-label position="floating"  style="font-size: larger;">Email</ion-label>
                                <ion-input id="emailLogin" type="email" color="primary" placeholder="Enter Email" style="font-size: x-large;"></ion-input>
                              </ion-item>
                            </ion-col>
                          </ion-row>
                          <ion-row>
                            <ion-col>
                              <ion-item>
                                <ion-label position="floating" style="font-size: larger;">Password</ion-label>
                                <ion-input id="passwordLogin" type="password" color="primary" style="font-size: x-large;" placeholder="Enter Password"></ion-input>
                              </ion-item>
                            </ion-col>
                          </ion-row>
                        </div>
                       
                        <ion-row>
                          <ion-col>
                            <div style="text-align: center;">
                              <ion-button onclick="handleSigninBtn(event)" color="primary" style="font-size: x-large;">Login</ion-button>
                              <ion-button href="signup.html" color="primary" style="font-size: x-large;">Signup</ion-button>
                            </div>
                             
                            
                          </ion-col>
                        </ion-row>
                      </ion-grid>

                </div>
            </div>
        </div>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
       

    </body>

    
    
<script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-firestore.js"></script>
<script>
    var firebaseConfig = {
            apiKey: "AIzaSyC7qvTJaOTpkYAkBLgfgvJTI2xjUofr2tE",
            authDomain: "foodplanner-be200.firebaseapp.com",
            databaseURL: "https://foodplanner-be200.firebaseio.com",
            projectId: "foodplanner-be200",
            storageBucket: "foodplanner-be200.appspot.com",
            messagingSenderId: "735315343676",
            appId: "1:735315343676:web:83d367f65d4b40f6b40639"
        };
firebase.initializeApp(firebaseConfig);
var handleSigninBtn= (e)=>{
    e.preventDefault();
    document.getElementById('spinner').style.display = "block";
   
    var email = document.getElementById("emailLogin").value;
    var pass = document.getElementById("passwordLogin").value;
    var errorMsg = document.getElementById("errorMsg");

   
    firebase.auth().signInWithEmailAndPassword(email, pass)
    .then(user=>{
       
        var storage = window.localStorage;
        storage.setItem("UserEmail",user.user.email );
        if(user.user.displayName) storage.setItem("UserName",user.user.displayName );
        else storage.setItem("UserName",user.user.email.split('@')[0] );
      

        document.getElementById('spinner').style.display = "none";
        window.location.href = "home.html";

    })
    .catch(function(error) {
        // Handle Errors here.
     
        var errorCode = error.code;
        var errorMessage = error.message;
        errorMsg.innerHTML = errorMessage;
        document.getElementById('spinner').style.display = "none";
        // ...
      });
}
</script>


</html>
